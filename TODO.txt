# TODO

- improve cover art
  - set cover in album tracks when doing update-tags
  - check for orphaned images
  - save @cover_file in album info.json file?
    - just read cover_file (as path) instead of deriving via glob
  - ignore/remove obsolete/useless GIF cover files?

- improve player
  - reimplement state checkpointing, to resume exactly where left off
  - use curses or tty for full-screen TTY mode?
  - use TTY::ProgressBar to show track playing progress?

- move config handling into main class
  - also definition of import/extract dir
  - use TTY::Config?

- improve searching
  - sort results by relevance, not by artist/title
  - move #find into Group
    - move hard-coded selectors into Group subclasses
      - call dynamically
      - eg, ':cd' => send("select_cd")

- improve 'select' tool
  - save to $MUSIC_ROOT/selection.json?
  - optionally name
  - can be referred to in query

- improve discogs update
  - don't simply delete previous collection
  - determine additions/removals/changes
  - handle case where Discogs has merged/moved releases
    - ie, release_id has changed
    - need to move related album

- when finding unripped CDs, also look for dups
  - to avoid needing to rip dup CDs

- allow artist key to be user-defined
  - save in group database
  - allow for modification as needed
  - ensure uniqueness
  - allow override of primary artist
    - eg, to file release under main artist instead of artist-group of collaboration
  - do artist sort/rename using artist ID
    - instead of CanonicalArtists/PersonalNames hash maps

- use exiftool instead of ffprobe/mp4tags
  $ exiftool -json -recurse . -ext m4a

- handle importing logs like tracks
  - create Log class with attributes:
    - timestamp
    - media type
    - accurip details
    - file:
    - disc: (can be nil)
    - status: (overall)
    - tracks status: (tracks)
  - add command to show:
    - missing rips (no tracks or log files)
    - questionable rips (tracks, but no log files)
    - unconfirmed rips (no record in online databases)
    - bad rips (actual read errors)
    - dubious rips (inconsistent checksums)
    - successful rips

- improve validation
  - validate logs
  - ensure cover exists
  - ensure track files exist

- calculate loudness
  - see: info/replay-gain.md